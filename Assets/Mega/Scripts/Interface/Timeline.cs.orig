﻿using System.Collections;
using System.Collections.Generic;
using Assets.Mega.Scripts;
using UnityEngine;
using UnityEngine.UI;

public class Timeline : MonoBehaviour {
    public List<TimeButton> timeButtons;
    private int currentNumber = 0;
    public Text text;
    //private int previousNumber;

    public void SwitchTimes (int number) {
        MainLogic.inst.SetQuarter(number);
        //Debug.Log(number);
        StartCoroutine(SwitchTimesWithDelay(number));
    }

    public IEnumerator SwitchTimesWithDelay (int number) {
        if(number > currentNumber) {
            for(int i = currentNumber; i <= number; i++) {
                //Debug.Log(i);
                if(timeButtons[i].year) {
                    //Debug.Log(true);
                    timeButtons[i].GetComponent<RectTransform>().sizeDelta = new Vector2(24, 73);
                } else {
                    timeButtons[i].GetComponent<RectTransform>().sizeDelta = new Vector2(12, 37);
                }
                yield return new WaitForSeconds(.01f);
            }
        } else {
            for(int i = currentNumber; i > number; i--) {
                //Debug.Log(i);
                if(timeButtons[i].year) {
                    //Debug.Log(true);
                    timeButtons[i].GetComponent<RectTransform>().sizeDelta = new Vector2(7, 73);
                } else {
                    timeButtons[i].GetComponent<RectTransform>().sizeDelta = new Vector2(2, 37);
                }
                yield return new WaitForSeconds(.01f);
            }
        }
        currentNumber = number;
        int year = 2017 + currentNumber / 5;
        text.text = year.ToString();
        yield return null;
    }



    // Use this for initialization
    void Start () {

    }

    // Update is called once per frame
    void Update () {

    }
}
